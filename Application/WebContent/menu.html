<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8" />
        <title>Nosliw Go Go !!</title>

    	<link rel="stylesheet" href="libresources/external/framework7/css/framework7.bundle.min.css">
        <script src="libresources/external/framework7/4.3.1/framework7.bundle.js"></script>
        <script src="libresources/external/jQuery/3.4.1/jquery.js"></script>
        
        <script src="libresources/external/Underscore/1.9.1/underscore.js"></script>
        <script src="libresources/external/Backbone/1.3.3/backbone.js"></script>
        <script src="libresources/external/log4javascript/1.0.0/log4javascript.js"></script>

		<script src="libresources/nosliw/core/nosliw.js"></script>
        
 		<meta name="viewport" content="width=device-width, initial-scale=1"> 

</head>

<body>
		<div id="mainDiv">
			<button onclick="myFunction()">Click me</button>
		
		</div>

   		<div class="view panel-view block" id="debugDiv1">
			<div id="lifecycleDebug"></div>
			<div id="dataDebug"></div>
			<div id="eventDebug"></div>
			<div id="resetDebug"></div>
       	</div>
</body>

<script>


var loc_lifecycleView;
var loc_dataView;
var loc_eventView;
var loc_resetView;

var loc_application;

function myFunction() {
	var resourceType = "test.complex.1";
	var resourceId = "testvalue";
	var configure = "testcomplex1";
	var appWin = window.open ("http://localhost:8082/nosliw/application.html?resourceType="+resourceType+"&resourceId="+resourceId+"&configure="+configure,resourceType+"_"+resourceId);

	appWin.addEventListener("nosliwApplicationActive", function(event) {
		loc_application = event.detail;
		updateApplication(loc_application);
    });
};

var init = function(){
	var node_createComponentLifeCycleDebugView = nosliw.getNodeData("debug.createComponentLifeCycleDebugView");
	var node_createComponentDataView = nosliw.getNodeData("debug.createComponentDataView");
	var node_createComponentEventView = nosliw.getNodeData("debug.createComponentEventView");

	loc_lifecycleView = node_createComponentLifeCycleDebugView();
	$('#lifecycleDebug').append(loc_lifecycleView.getView());

//	loc_dataView = node_createComponentDataView(); 
//	$('#dataDebug').append(loc_dataView.getView());

//	loc_eventView = node_createComponentEventView();
//	$('#eventDebug').append(loc_eventView.getView());
	
};

var updateApplication = function(application){
	loc_lifecycleView.setComponent(application);
//	loc_dataView.setComponent(application);
//	loc_eventView.setComponent(application);
};

$(document).on("nosliwActive", function(){

	init();
	
});

</script>

<script src="libresources/nosliw/runtimebrowserinit/utility.js"></script>
<script src="libresources/nosliw/runtimebrowserinit/init.js"></script>
<script src="init_runtime.js"></script>

</html>
