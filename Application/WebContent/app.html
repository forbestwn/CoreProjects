<!DOCTYPE html>
<html>
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<!--         <meta charset="utf-8" /> -->
        <title>Nosliw Go Go !!</title>

    	<link rel="stylesheet" href="libresources/external/framework7/css/framework7.bundle.min.css">
        <script src="libresources/external/framework7/4.3.1/framework7.bundle.js"></script>
        <script src="libresources/external/jQuery/2.1.0/jquery.js"></script>
        
        <script src="libresources/external/log4javascript/1.0.0/log4javascript.js"></script>
		<script src="libresources/nosliw/runtimebrowserinit/init.js"></script>

		<meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>
	<div class="panel panel-left panel-cover">
  		<div class="view panel-view block" id="debugDiv">
			<div id="lifecycleDebug"></div>
			<div id="inputDebug"></div>
			<div id="dataDebug"></div>
			<div id="eventDebug"></div>
       	</div>
   	</div>

	<div id="appModuleDiv"></div>

	<div class="panel panel-right panel-cover">
     	<div class="block" id="settingModuleDiv" style="overflow-y:scroll; height:800px"></div>
   	</div>
</body>

<script>

$(document).on("nosliwActive", function(){
	var node_createServiceRequestInfoSequence = nosliw.getNodeData("request.request.createServiceRequestInfoSequence");
	var node_requestServiceProcessor = nosliw.getNodeData("request.requestServiceProcessor");
	var node_COMMONCONSTANT = nosliw.getNodeData("constant.COMMONCONSTANT");
	var node_COMMONATRIBUTECONSTANT = nosliw.getNodeData("constant.COMMONATRIBUTECONSTANT");
	var node_appDataService = nosliw.getNodeData("uiapp.appDataService");
	var node_storeService = nosliw.getNodeData("uiapp.storeService");
	var node_createTypicalConfigure = nosliw.getNodeData("uiapp.createTypicalConfigure");
	var node_getComponentLifecycleInterface = nosliw.getNodeData("component.getComponentLifecycleInterface");
	var node_createAppDecoration = nosliw.getNodeData("uiapp.createAppDecoration");
	var node_createComponentLifeCycleDebugView = nosliw.getNodeData("component.createComponentLifeCycleDebugView");
	var node_createComponentDataView = nosliw.getNodeData("component.createComponentDataView");
	var node_createComponentEventView = nosliw.getNodeData("component.createComponentEventView");
	var node_createComponentResetView = nosliw.getNodeData("component.createComponentResetView");
	
	var loc_appId;
	var loc_appRuntime;

	var requestProcessor = nosliw.runtime.getRequestProcessor();
	requestProcessor.registerEventListener(undefined, function(eventName, requestId){
		if(eventName==node_CONSTANT.REQUESTPROCESS_EVENT_START){
			framework7App.preloader.show();
		}
		else if(eventName==node_CONSTANT.REQUESTPROCESS_EVENT_DONE){
			framework7App.preloader.hide();
		}
	});
	
	
    // Our initialization code here
	var currentSearchString = window.location.search;
	var appEntryId = currentSearchString.substring(currentSearchString.indexOf("=")+1);

	var framework7App = new Framework7({
		  // App root element
		  root: $("#appModuleDiv").get(),
		  name: 'My App',
		  id: 'com.myapp.test',
		  panel: {
			    swipe: 'both',
		  },		
	});
	var configure = node_createTypicalConfigure($('#appModuleDiv').get(), $('#settingModuleDiv').get(), node_appDataService, node_storeService, framework7App);
	
	var loc_debugLifecycleView = node_createComponentLifeCycleDebugView();
	$('#lifecycleDebug').append(loc_debugLifecycleView.getView());
	
	var loc_debugDataView = node_createComponentDataView();
	$('#dataDebug').append(loc_debugDataView.getView());

	var loc_debugEventView = node_createComponentEventView();
	$('#eventDebug').append(loc_debugEventView.getView());

	
	var loc_debugResetView = node_createComponentResetView(function(){
		nosliw.runtime.getUIAppService().executeGetUIAppEntryRuntimeRequest(appEntryId, appEntryId, configure, undefined,
			{
				success : function(requestInfo, appRuntime){
					loc_appRuntime = appRuntime;
					loc_debugLifecycleView.setComponent(appRuntime);
					loc_debugDataView.setComponent(appRuntime, requestInfo);
					loc_debugEventView.setComponent(appRuntime);
				}
			}
		);
	});
	$('#inputDebug').append(loc_debugResetView.getView());
	
});

nosliw.init();
</script>

</html>
