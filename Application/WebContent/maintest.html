<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8" />
        <title>Nosliw Go Go !!</title>

        <script src="libresources/external/Underscore/1.6.0/underscore.js"></script>
        <script src="libresources/external/Backbone/1.1.2/backbone.js"></script>
        <script src="libresources/external/jQuery/2.1.0/jquery.js"></script>
        <script src="libresources/external/log4javascript/1.0.0/log4javascript.js"></script>
        
</head>

<body>
	 <div id="map"></div>

	<div id="testDiv">
	</div>

</body>

<script src="libresources/nosliw/core/nosliw.js"></script>
<script>
nosliw.registerNodeEvent("runtime", "active", function(eventName, nodeName){
	
	var currentSearchString = window.location.search;
	var page = currentSearchString.substring(currentSearchString.indexOf("=")+1);
	nosliw.runtime.getUIResourceService().executeCreateUIResourceViewRequest(page, 
			{
				success : function(requestInfo, uiResourceView){
					nosliw.logging.info(JSON.stringify(uiResourceView));
					
					uiResourceView.appendTo($('#testDiv'));
					
//					uiResourceView.getContext().
					
					uiResourceView.executeDataOperationRequestSet("result", {
						
						dataTypeId: "test.array;1.0.0",
						value: [
							{
								dataTypeId: "test.map;1.0.0",
								value: {
									schoolName : {
										dataTypeId: "test.string;1.0.0",
										value: "School1"
									},
									schoolRating : {
										dataTypeId: "test.float;1.0.0",
										value: 6.0
									},
									geo : {
										dataTypeId: "test.geo;1.0.0",
										value: {
											"latitude" :  43.651299,
											"longitude" : -79.579473
										}
									}
								}
							},
							{
								dataTypeId: "test.map;1.0.0",
								value: {
									schoolName : {
										dataTypeId: "test.string;1.0.0",
										value: "School2"
									},
									schoolRating : {
										dataTypeId: "test.float;1.0.0",
										value: 8.5
									},
									geo : {
										dataTypeId: "test.geo;1.0.0",
										value: {
											"latitude" :  43.649016, 
											"longitude" : -79.485059
										}
									}
								}
							}					
						]						
						
					});

					
					
//					var views = uiResourceView.getViews();
//					$('#testDiv').append(views.children());

				}
			}
	);
});
</script>
<script src="libresources/nosliw/runtimebrowserinit/init.js"></script>

</html>
